<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Edit Watch - Store Management</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
</head>

<body>
  <!-- Navbar Section -->
  <nav class="navbar is-light">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item" href="/">
          <img src="https://www.watchstore.vn/images/config/logo-watchstore3-9-24_1725292445.webp" alt="Watch Store">
        </a>
        <div class="navbar-burger" data-target="navbarMenu">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>

      <div id="navbarMenu" class="navbar-menu">
        <div class="navbar-end">
          <a class="navbar-item" href="/dashboard">Watch Management</a>
          <a class="navbar-item" href="/brand-mng">Brand Management</a>
          <a class="navbar-item" href="#">About</a>
          <a class="navbar-item" href="#">Contact</a>

          <!-- Check if user is signed in -->
          <% if (Member) { %>
            <!-- If signed in, show welcome message and logout button -->
            <a class="navbar-item">Welcome, <%= Member.membername %>!</a>
            <a class="navbar-item" href="/users/logout">Logout</a>
            <% } else { %>
              <!-- If not signed in, show Sign In button -->
              <a class="button is-primary" href="/users/login">Sign In</a>
              <% } %>
        </div>
      </div>
    </div>
  </nav>
  <section class="section">
    <div class="container">
      <h1 class="title is-3">Edit Watch Details</h1>

      <!-- Form to edit watch details -->
      <form onsubmit="return confirm(`Are you sure to edit watch`)" method="POST" action="">
        <!-- Watch Name Field -->
        <div class="field">
          <label class="label">Watch Name</label>
          <div class="control">
            <input class="input" type="text" name="watchName" value="<%= Watch.watchName %>" required>
          </div>
        </div>

        <!-- image Field -->
        <div class="field">
          <label class="label">Image</label>
          <div class="control">
            <input class="input" type="text" name="image" value="<%= Watch.image %>" required>
          </div>
          <!-- Display Image Preview -->
          <figure class="image is-128x128 mt-2">
            <img src="<%= Watch.image %>" alt="Watch Image">
          </figure>
        </div>


        <!-- Price Field -->
        <div class="field">
          <label class="label">Price</label>
          <div class="control">
            <input class="input" type="number" name="price" value="<%= Watch.price %>" required step="0.01" min="0">
          </div>
        </div>

        <!-- Brand Selection Field -->
        <div class="field">
          <label class="label">Brand</label>
          <div class="control">
            <div class="select">
              <select name="brand" required>
                <!-- Assuming you have a list of brands to select from -->
                <% brands.forEach((brand)=> { %>
                  <option value="<%= brand._id %>" <%=brand._id===Watch.brand._id ? 'selected' : '' %> >
                    <%= brand.brandName %>
                  </option>
                  <% }) %>
              </select>
            </div>
          </div>
        </div>

        <!-- Automatic Field (Checkbox) -->
        <div class="field">
          <label class="label">Automatic</label>
          <div class="control">
            <!-- Hidden input to submit "false" when checkbox is unchecked -->
            <label class="checkbox">
              <input type="checkbox" name="Automatic" value="true" <%=Watch.Automatic ? 'checked' : '' %>>
              Automatic Movement
            </label>
          </div>
        </div>


        <!-- Description Field -->
        <div class="field">
          <label class="label">Description</label>
          <div class="control">
            <textarea class="textarea" name="watchDescription" required><%= Watch.watchDescription %></textarea>
          </div>
        </div>

        <% if (err) { %>
          <p>
            <%= err %>
          </p>
          <% } %>

            <!-- Buttons for submission and cancellation -->
            <div class="field is-grouped">
              <div class="control">
                <form action="" method="post"><button class="button is-primary" type="submit">Save Changes</button></form>
              </div>
              <div class="control">
                <a class="button is-light" href="/dashboard">Cancel</a>
              </div>
            </div>
      </form>
    </div>
  </section>
  <!-- Footer Section -->
  <footer class="footer">
    <div class="content has-text-centered">
      <p>
        <strong>Store Management</strong> by Your Brand. All rights reserved.
      </p>
    </div>
  </footer>
</body>

<footer class="footer">
  <div class="content has-text-centered">
    <p>
      Store Management Â© 2024. All rights reserved.
    </p>
  </div>
</footer>
</body>

</html>